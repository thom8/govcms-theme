!function(e,a,n,t,r){a.behaviors.validateEasyBakeOrderForm={attach:function(a,r){function s(e){if(0==t.getElementsByClassName("messages validate").length){var a,n,r=t.getElementById("page-title"),s=t.createElement("div"),i=t.createElement("h2"),l=t.createElement("ul");if(s.className="messages--error messages error validate",i.className="element-invisible",i.innerHTML="Error message",s.appendChild(i),e.length>1){l.className="messages__list";for(var m=0;m<e.length;m++)a=t.createElement("li"),a.className="messages__item",n=t.createElement("pre"),n.innerHTML=e[m].message,a.appendChild(n),l.appendChild(a);s.appendChild(l)}else n=t.createTextNode(e[0].message),s.appendChild(n);r.parentNode.insertBefore(s,r.nextSibling)}}function i(a,t){if(m){var r={contact_name:a.find("input[name='contact_name']").val(),contact_email:a.find("input[name='contact_email']").val(),contact_phone:a.find("input[name='phone_number']").val(),site_name:a.find("input[name='site_name']").val(),agency_name:a.find("input[name='agency_name']").val()},i=a.find("textarea[name='website_purpose']").val();i&&(r.website_purpose=i);var l=m+"/order/submit";e.ajax({url:l,type:"POST",data:r,async:!1,success:function(e){o&&n.location.replace(o)},error:function(e,a){var n,t=JSON.parse(e.response),r="Error: ";r+=t.error,r+="\nDetails: ",t.details&&(r+=t.details.message),n=[{message:r}],s(n)}})}else{s([{message:"This form cannot be submitted at the moment. Please contact your administrator for more information."}])}t.preventDefault()}var l,m,o;if(r.ezBake&&(r.ezBake.bakerURL&&(m=r.ezBake.bakerURL),r.ezBake.confirmPageURL&&(o=r.ezBake.confirmPageURL),r.ezBake.errorPageURL&&r.ezBake.errorPageURL),(l=e('form[name="easybake-order-form"]'))&&l.length>0){new FormValidator("easybake-order-form",[{name:"contact_name",display:"name",rules:"required"},{name:"contact_email",display:"email",rules:"required|valid_email|callback_gov_email"},{name:"phone_number",display:"phone number",rules:"required"},{name:"site_name",display:"site name",rules:"required"},{name:"agency_name",display:"agency name",rules:"required"}],function(a,n){if(a.length>0)s(a);else{var r=t.getElementsByClassName("messages validate");r.length>0&&r[0].parentNode.removeChild(r[0]);i(e(n.target||n.srcElement),n)}}).registerCallback("gov_email",function(e){return/gov\.au$/.test(e)}).setMessage("gov_email","We're sorry, the govCMS service is only available to Australian government entities so we require you to have a valid .gov.au email address. If you are part of a government entity that doesn't use .gov.au email addresses, please get in touch and we can help you.")}}}}(jQuery,Drupal,this,this.document);